# ============================================================================
# PIKA Memory System - Environment Variables Configuration
# ============================================================================
# Copy this file to .env and update with your actual values
# cp .env.example .env
# ============================================================================

# ============================================================================
# Application Settings
# ============================================================================
APP_NAME=PIKA Memory System
APP_VERSION=1.0.0
DEBUG=false
ENVIRONMENT=development

# ============================================================================
# API Configuration
# ============================================================================
API_V1_PREFIX=/api/v1
# CORS_ORIGINS can be:
#   - JSON array: ["http://localhost:3000", "http://localhost:3001"]
#   - Comma-separated: http://localhost:3000,http://localhost:3001
#   - Single value: *
CORS_ORIGINS=["*"]

# ============================================================================
# PostgreSQL Database
# ============================================================================
POSTGRES_HOST=103.253.20.30
POSTGRES_USER=postgres
POSTGRES_PASSWORD=123456aA
POSTGRES_PORT=5441
POSTGRES_DB=robot_mem0
POSTGRES_POOL_SIZE=10
POSTGRES_MAX_OVERFLOW=20
# Optional: Full database URL (overrides individual settings above)
# POSTGRES_URL=postgresql+asyncpg://user:password@host:port/database

# ============================================================================
# Milvus Vector Store
# ============================================================================
MILVUS_HOST=124.197.21.40
MILVUS_PORT=19530
MILVUS_COLLECTION_NAME=user_facts

# ============================================================================
# Qdrant Vector Store (Alternative to Milvus)
# ============================================================================
# QDRANT_HOST=localhost
# QDRANT_PORT=6333

# ============================================================================
# Neo4j Graph Database
# ============================================================================
NEO4J_URI=bolt://124.197.21.40:8687
NEO4J_USER=neo4j
NEO4J_PASSWORD=mem0graph

# ============================================================================
# Redis Cache
# ============================================================================
REDIS_HOST=103.253.20.30
REDIS_PORT=30004
REDIS_DB=0
REDIS_PASSWORD=yourStrongPassword
REDIS_MAX_CONNECTIONS=50
# Optional: Full Redis URL (overrides individual settings above)
# REDIS_URL=redis://localhost:6379/0

# ============================================================================
# RabbitMQ Message Queue
# ============================================================================
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
RABBITMQ_DEFAULT_USER=guest
RABBITMQ_DEFAULT_PASS=guest
RABBITMQ_VHOST=/
RABBITMQ_EXTRACTION_QUEUE=memory_extraction
RABBITMQ_PREFETCH_COUNT=1

# ============================================================================
# Mem0 Configuration
# ============================================================================
# Set to true to use Mem0 Open Source (self-hosted), false for Enterprise API
MEM0_USE_OSS=true

# Mem0 Enterprise API (only used when MEM0_USE_OSS=false)
# MEM0_API_KEY=your_mem0_api_key
# MEM0_ORG_ID=your_org_id
# MEM0_PROJECT_ID=your_project_id

# ============================================================================
# Mem0 OSS - Vector Store Configuration
# ============================================================================
# Options: milvus, qdrant, chroma, pgvector
MEM0_VECTOR_STORE_PROVIDER=milvus
MEM0_VECTOR_STORE_COLLECTION_NAME=user_facts
MEM0_VECTOR_STORE_HOST=124.197.21.40
MEM0_VECTOR_STORE_PORT=19530
# Optional: Override with full URL
# MEM0_VECTOR_STORE_URL=http://localhost:6333
# Optional: For Milvus authentication
# MEM0_VECTOR_STORE_USER=
# MEM0_VECTOR_STORE_PASSWORD=

# ============================================================================
# Mem0 OSS - LLM Configuration
# ============================================================================
# Options: openai, ollama, litellm, groq, together
MEM0_LLM_PROVIDER=openai
MEM0_LLM_MODEL=gpt-4o-mini
# Optional: Override OPENAI_API_KEY for LLM
# MEM0_LLM_API_KEY=sk-...

# ============================================================================
# Mem0 OSS - Embedder Configuration
# ============================================================================
# Options: openai, huggingface, ollama, azure_openai
MEM0_EMBEDDER_PROVIDER=openai
MEM0_EMBEDDER_MODEL=text-embedding-3-small
# Optional: Override OPENAI_API_KEY for embedder
# MEM0_EMBEDDER_API_KEY=sk-...

# ============================================================================
# Mem0 OSS - Graph Store (Optional, for v1.1)
# ============================================================================
MEM0_GRAPH_STORE_ENABLED=false
MEM0_GRAPH_STORE_PROVIDER=neo4j
# Version: v1.0 (no graph) or v1.1 (with graph features)
MEM0_VERSION=v1.0
# Optional: Custom history database path (default: ~/.mem0/history.db)
# MEM0_HISTORY_DB_PATH=/path/to/history.db

# ============================================================================
# OpenAI Configuration
# ============================================================================
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_LLM_MODEL=gpt-4o-mini
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# ============================================================================
# Caching Configuration
# ============================================================================
# L0 Cache: Session Cache (in-memory, request lifetime)
CACHE_L0_ENABLED=true
CACHE_L0_TTL=0

# L1 Cache: Redis Cache (1 hour)
CACHE_L1_ENABLED=true
CACHE_L1_TTL=3600
CACHE_L1_KEY_PREFIX=search

# L2 Cache: PostgreSQL Materialized View (24 hours)
CACHE_L2_ENABLED=true
CACHE_L2_TTL=86400

# L3 Cache: Redis Embedding Cache (24 hours)
CACHE_L3_ENABLED=true
CACHE_L3_TTL=86400
CACHE_L3_KEY_PREFIX=embedding

# ============================================================================
# Proactive Caching
# ============================================================================
PROACTIVE_CACHE_ENABLED=true
PROACTIVE_CACHE_INTERVAL_SECONDS=1800
PROACTIVE_CACHE_USER_FAVORITE_QUERY=user favorite (movie, character, pet, activity, friend, music, travel, toy)

# ============================================================================
# Job Configuration
# ============================================================================
JOB_TIMEOUT_SECONDS=300
JOB_MAX_RETRIES=3

# ============================================================================
# Performance Settings
# ============================================================================
MAX_CONCURRENT_REQUESTS=100
REQUEST_TIMEOUT_SECONDS=30

# ============================================================================
# Monitoring
# ============================================================================
ENABLE_METRICS=true
METRICS_PORT=9090
